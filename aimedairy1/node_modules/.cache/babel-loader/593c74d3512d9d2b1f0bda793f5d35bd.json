{"ast":null,"code":"var _jsxFileName = \"/Users/hawwalayanlola/Desktop/AIme\\u0300 Diary/aime_diary/src/components/Form/DiaryModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport Modal from \"@mui/material/Modal\";\nimport CustomInput from \"./CustomInput\";\nimport { FormControlLabel, FormGroup, Grid, Switch } from \"@mui/material\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport useDiary from \"../../hooks/useDiary\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  position: \"absolute\",\n  top: \"50%\",\n  left: \"50%\",\n  transform: \"translate(-50%, -50%)\",\n  width: 600,\n  height: 600,\n  outline: \"none\",\n  bgcolor: \"background.paper\",\n  boxShadow: 24,\n  display: \"flex\",\n  flexFlow: \"column\"\n};\n\nconst DiaryModal = _ref => {\n  _s();\n\n  let {\n    setOpen,\n    open\n  } = _ref;\n  const editorRef = useRef(null);\n  const [logo, setLogo] = useState();\n  const [diary, setDiary] = useState({\n    title: \"\",\n    location: \"\",\n    date: \"\",\n    diary: null,\n    isPrivate: false\n  });\n  const {\n    uploadProject,\n    createProject\n  } = useDiary();\n\n  const handleClose = () => setOpen(false);\n\n  const changeHandler = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n\n    if (name === \"isPrivate\") {\n      return setDiary({ ...diary,\n        [name]: value === true ? false : true\n      });\n    } else if (name === \"logo\") {\n      files && files[0] && setLogo(files[0]);\n    }\n\n    setDiary({ ...diary,\n      [name]: value\n    });\n  };\n\n  const submitHandler = async () => {\n    diary.diary = editorRef.current && editorRef.current.getContent();\n    console.log(diary);\n    if (!logo) return alert(\"Please fill the form correctly!\");\n\n    for (const prop in diary) {\n      if (!diary[prop] && prop !== \"isPrivate\") return alert(\"Please fill the form correctly!\");\n    }\n\n    const {\n      file\n    } = await uploadProject(logo);\n    diary.logo = file;\n    await createProject(diary);\n    alert(\"Diary saved!\");\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style,\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal__title\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Add Diary \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal__content\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(CustomInput, {\n                type: \"text\",\n                name: \"title\",\n                onChange: changeHandler,\n                placeholder: \"Title\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            direction: \"row\",\n            justifyContent: \"space-between\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              xs: 7.5,\n              children: /*#__PURE__*/_jsxDEV(CustomInput, {\n                type: \"text\",\n                name: \"location\",\n                onChange: changeHandler,\n                placeholder: \"Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              xs: 4,\n              children: /*#__PURE__*/_jsxDEV(CustomInput, {\n                type: \"date\",\n                name: \"date\",\n                onChange: changeHandler,\n                placeholder: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              xs: 12,\n              sx: {\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"customInput\",\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  style: {\n                    marginBottom: \"1rem\"\n                  },\n                  children: \"Diary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Editor, {\n                  onInit: (evt, editor) => editorRef.current = editor,\n                  initialValue: \"\",\n                  init: {\n                    height: 150,\n                    menubar: false,\n                    plugins: [\"advlist\", \"autolink\", \"lists\", \"link\", \"image\", \"charmap\", \"anchor\", \"searchreplace\", \"visualblocks\", \"code\", \"fullscreen\", \"insertdatetime\", \"media\", \"table\", \"preview\", \"help\", \"wordcount\"],\n                    toolbar: \"undo redo | blocks | \" + \"bold italic forecolor | alignleft aligncenter \" + \"alignright alignjustify | bullist numlist outdent indent | \" + \"removeformat | help\",\n                    content_style: \"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              xs: 12,\n              sx: {\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(CustomInput, {\n                type: \"file\",\n                name: \"logo\",\n                onChange: changeHandler,\n                placeholder: \"Image\",\n                inputStyle: {\n                  height: \"6rem\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              sx: {\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  control: /*#__PURE__*/_jsxDEV(Switch, {\n                    onChange: changeHandler,\n                    name: \"isPrivate\",\n                    value: false\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 23\n                  }, this),\n                  label: \"Make Private\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              sm: 12,\n              sx: {\n                display: \"flex\",\n                justifyContent: \"center\",\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: submitHandler,\n                className: \"smallBtn\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DiaryModal, \"asS+BMK6VnDbn0JcwcauvBnUEho=\", false, function () {\n  return [useDiary];\n});\n\n_c = DiaryModal;\nexport default DiaryModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"DiaryModal\");","map":{"version":3,"sources":["/Users/hawwalayanlola/Desktop/AImeÌ€ Diary/aime_diary/src/components/Form/DiaryModal.js"],"names":["React","useRef","useState","Box","Button","Typography","Modal","CustomInput","FormControlLabel","FormGroup","Grid","Switch","Editor","useDiary","style","position","top","left","transform","width","height","outline","bgcolor","boxShadow","display","flexFlow","DiaryModal","setOpen","open","editorRef","logo","setLogo","diary","setDiary","title","location","date","isPrivate","uploadProject","createProject","handleClose","changeHandler","e","name","value","files","target","submitHandler","current","getContent","console","log","alert","prop","file","mt","marginBottom","evt","editor","menubar","plugins","toolbar","content_style","justifyContent"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport CustomInput from \"./CustomInput\";\r\nimport { FormControlLabel, FormGroup, Grid, Switch } from \"@mui/material\";\r\nimport { Editor } from \"@tinymce/tinymce-react\";\r\nimport useDiary from \"../../hooks/useDiary\";\r\n\r\nconst style = {\r\n  position: \"absolute\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: 600,\r\n  height: 600,\r\n  outline: \"none\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  display: \"flex\",\r\n  flexFlow: \"column\",\r\n};\r\n\r\nconst DiaryModal = ({ setOpen, open }) => {\r\n  const editorRef = useRef(null);\r\n  const [logo, setLogo] = useState();\r\n  const [diary, setDiary] = useState({\r\n    title: \"\",\r\n    location: \"\",\r\n    date: \"\",\r\n    diary: null,\r\n    isPrivate: false,\r\n  });\r\n\r\n  const { uploadProject, createProject } = useDiary();\r\n\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const changeHandler = e => {\r\n    const { name, value, files } = e.target;\r\n\r\n    if (name === \"isPrivate\") {\r\n      return setDiary({ ...diary, [name]: value === true ? false : true });\r\n    } else if (name === \"logo\") {\r\n      files && files[0] && setLogo(files[0]);\r\n    }\r\n    setDiary({ ...diary, [name]: value });\r\n  };\r\n\r\n  const submitHandler = async () => {\r\n    diary.diary = editorRef.current && editorRef.current.getContent();\r\n    console.log(diary);\r\n    if (!logo) return alert(\"Please fill the form correctly!\");\r\n    for (const prop in diary) {\r\n      if (!diary[prop] && prop !== \"isPrivate\")\r\n        return alert(\"Please fill the form correctly!\");\r\n    }\r\n\r\n    const { file } = await uploadProject(logo);\r\n\r\n    diary.logo = file;\r\n    await createProject(diary);\r\n    alert(\"Diary saved!\");\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby='modal-modal-title'\r\n        aria-describedby='modal-modal-description'\r\n      >\r\n        <Box sx={style} className='modal'>\r\n          <div className='modal__title'>\r\n            <h2>Add Diary </h2>\r\n          </div>\r\n          <div className='modal__content'>\r\n            <Grid container>\r\n              <Grid xs={12}>\r\n                <CustomInput\r\n                  type='text'\r\n                  name='title'\r\n                  onChange={changeHandler}\r\n                  placeholder='Title'\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container direction='row' justifyContent='space-between'>\r\n              <Grid xs={7.5}>\r\n                <CustomInput\r\n                  type='text'\r\n                  name='location'\r\n                  onChange={changeHandler}\r\n                  placeholder='Location'\r\n                />\r\n              </Grid>\r\n              <Grid xs={4}>\r\n                <CustomInput\r\n                  type='date'\r\n                  name='date'\r\n                  onChange={changeHandler}\r\n                  placeholder='Date'\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n              <Grid xs={12} sx={{ mt: 2 }}>\r\n                <div className='customInput'>\r\n                  <h2 style={{ marginBottom: \"1rem\" }}>Diary</h2>\r\n                  <Editor\r\n                    onInit={(evt, editor) => (editorRef.current = editor)}\r\n                    initialValue=''\r\n                    init={{\r\n                      height: 150,\r\n                      menubar: false,\r\n                      plugins: [\r\n                        \"advlist\",\r\n                        \"autolink\",\r\n                        \"lists\",\r\n                        \"link\",\r\n                        \"image\",\r\n                        \"charmap\",\r\n                        \"anchor\",\r\n                        \"searchreplace\",\r\n                        \"visualblocks\",\r\n                        \"code\",\r\n                        \"fullscreen\",\r\n                        \"insertdatetime\",\r\n                        \"media\",\r\n                        \"table\",\r\n                        \"preview\",\r\n                        \"help\",\r\n                        \"wordcount\",\r\n                      ],\r\n                      toolbar:\r\n                        \"undo redo | blocks | \" +\r\n                        \"bold italic forecolor | alignleft aligncenter \" +\r\n                        \"alignright alignjustify | bullist numlist outdent indent | \" +\r\n                        \"removeformat | help\",\r\n                      content_style:\r\n                        \"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }\",\r\n                    }}\r\n                  />\r\n                </div>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n              <Grid xs={12} sx={{ mt: 2 }}>\r\n                <CustomInput\r\n                  type='file'\r\n                  name='logo'\r\n                  onChange={changeHandler}\r\n                  placeholder='Image'\r\n                  inputStyle={{ height: \"6rem\" }}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n              <Grid sx={{ mt: 2 }}>\r\n                <FormGroup>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Switch\r\n                        onChange={changeHandler}\r\n                        name='isPrivate'\r\n                        value={false}\r\n                      />\r\n                    }\r\n                    label='Make Private'\r\n                  />\r\n                </FormGroup>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container>\r\n              <Grid\r\n                sm={12}\r\n                sx={{ display: \"flex\", justifyContent: \"center\", mt: 2 }}\r\n              >\r\n                <button onClick={submitHandler} className='smallBtn'>\r\n                  Save\r\n                </button>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Box>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiaryModal;\r\n"]},"metadata":{},"sourceType":"module"}